From ebefe6d080859d6bd5c1c83e973150a46bb343f4 Mon Sep 17 00:00:00 2001
From: Constantin Baranov <const@mimas.ru>
Date: Sat, 16 Jan 2010 23:00:16 +0400
Subject: [PATCH 1/2] BUG(2271): Fix Python site directory detection

Signed-off-by: Constantin Baranov <const@mimas.ru>
---
 src/clients/lib/python/wscript |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/src/clients/lib/python/wscript b/src/clients/lib/python/wscript
index 5ef8870..b6eeaf4 100644
--- a/src/clients/lib/python/wscript
+++ b/src/clients/lib/python/wscript
@@ -1,6 +1,7 @@
 import Configure
 from logging import warning
 import os
+import distutils.sysconfig
 
 def build(bld):
     obj = bld.new_task_gen('cc', 'shlib', 'pyext')
@@ -25,6 +26,8 @@ def build(bld):
     bld.install_files('${xmmsclient_PYTHONDIR}', 'xmmsclient/qt3.py')
 
 def configure(conf):
+    if 'PYTHONDIR' not in os.environ:
+        os.environ['PYTHONDIR'] = distutils.sysconfig.get_python_lib()
     conf.check_tool('python')
     if not conf.env['PYTHON']:
         conf.fatal("python not found")
-- 
1.6.6

